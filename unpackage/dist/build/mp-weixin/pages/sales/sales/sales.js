(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sales/sales/sales"],{"12e9":function(t,i,e){"use strict";e.r(i);var n=e("b620"),s=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=s.a},2720:function(t,i,e){"use strict";e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return n}));var n={uniEasyinput:function(){return e.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(e.bind(null,"a715"))},uniDatetimePicker:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(e.bind(null,"1a41"))}},s=function(){var t=this,i=t.$createElement;t._self._c},o=[]},a3c4:function(t,i,e){},aa80:function(t,i,e){"use strict";e.r(i);var n=e("2720"),s=e("12e9");for(var o in s)"default"!==o&&function(t){e.d(i,t,(function(){return s[t]}))}(o);e("badb");var a,c=e("f0c5"),u=Object(c["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);i["default"]=u.exports},b030:function(t,i,e){"use strict";(function(t){e("4381");n(e("dc04"));var i=n(e("aa80"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(i.default)}).call(this,e("97ff")["createPage"])},b620:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={data:function(){return{order_no:"",goods_name:"",customer_name:"",start_time:"",end_time:"",date:"",list:[],page:0,warehouse:[],goodList:[],isShow:-1,show:!1,pingId:"",image:[],pingdate:"",showPing:!1,showKuaidi:!1,courierList:[],kehu:""}},onLoad:function(){var t=this;t.http({url:t.api.Wechat_template_list,method:"POST",data:{uid:t.common.get("uid")},success:function(i){0==i.list[0].status&&wx.getSetting({withSubscriptions:!0,success:function(e){if(e.subscriptionsSetting.mainSwitch)if(null!=e.subscriptionsSetting.itemSettings){var n=e.subscriptionsSetting.itemSettings[tmplIds];"accept"===n?console.log("接受了消息推送"):"reject"===n?console.log("拒绝消息推送"):"ban"===n&&console.log("已被后台封禁")}else wx.showModal({title:"提示",content:"请授权开通发货提醒服务通知",showCancel:!0,success:function(e){e.confirm&&wx.requestSubscribeMessage({tmplIds:[i.list[0].template_id],success:function(e){console.log("订阅消息 成功 "),console.log(e);var n=[];n.push({template_id:i.list[0].template_id,status:!0}),t.http({url:t.api.Wechat_auth_template,method:"POST",data:{uid:t.common.get("uid"),data:JSON.stringify(n)},success:function(t){}})},fail:function(t){console.log("订阅消息 失败 "),console.log(t)}})}});else console.log("订阅消息未开启")},fail:function(t){console.log(t)}})}}),t.page=0,t.uid=t.common.get("uid"),t.listInterface()},onReachBottom:function(){var i=this;this.http({url:this.api.Sales_list,method:"POST",data:{uid:this.common.get("uid"),order_no:this.order_no,goods_name:this.goods_name,customer_name:this.customer_name,date:this.date,page:this.page},success:function(e){i.page+=1,0==e.list.length?t.showToast({title:"没有更多了",icon:"none",duration:2e3}):i.list=i.list.concat(e.list)}})},methods:{copy:function(t){wx.setClipboardData({data:t,showToast:!1,success:function(){}})},courier:function(t){this.courierList=t.express_no,this.kehu=t.order_no,this.showKuaidi=!0},credentials:function(t){var i=this;this.http({url:this.api.Sales_collect,method:"POST",data:{uid:this.common.get("uid"),id:t},success:function(t){i.pingdate=t.date,i.image=t.image,i.image=i.image.split("|"),i.showPing=!0}})},submit_mon:function(){var i=this;t.showModal({title:"提示",content:"确定当前操作吗？",success:function(t){t.confirm&&(i.image=i.image.join("|"),i.http({url:i.api.Sales_collect_submit,method:"POST",data:{uid:i.common.get("uid"),id:i.pingId,image:i.image,date:i.pingdate},success:function(t){i.show=!1,i.page=0,i.listInterface(),i.image=[],i.pingdate="",i.pingId=""}}))},fail:function(){},complete:function(){}})},previewImage:function(t){wx.previewImage({current:this.image[t],urls:this.image})},deleteImage:function(t){this.image.splice(t,1)},uploadImage:function(){var i=this;t.chooseImage({count:1,success:function(e){var n=e.tempFilePaths[0];t.uploadFile({url:i.common.baseUrl+i.api.upload,filePath:n,name:"file",success:function(e){var n=JSON.parse(e.data);1==n.code?i.image.push(n.data.url):t.showToast({title:"上传失败",icon:"none"})},fail:function(i){t.showToast({title:"上传失败,"+i,icon:"none"})}})}})},changeDate:function(t){this.pingdate=t},collection:function(t){this.pingId=t,this.show=!0},closeModal:function(){this.showPing=!1,this.show=!1,this.showKuaidi=!1,this.image="",this.pingdate="",this.pingId="",this.courierList=[],this.kehu=""},edit_del_click:function(t,i){var e=this;if(i==e.isShow)return e.isShow=-1,!1;e.isShow=i},hideIsShow:function(){this.isShow=-1},listInterface:function(){var i=this;this.http({url:this.api.Sales_list,method:"POST",data:{uid:this.common.get("uid"),order_no:this.order_no,goods_name:this.goods_name,customer_name:this.customer_name,date:this.date,page:this.page},success:function(e){i.page+=1,0==e.list.length?(t.showToast({title:"没有数据",icon:"none",duration:2e3}),i.list=e.list):i.list=e.list}})},search:function(){this.page=0,this.listInterface()},searchTime:function(){this.date=this.start_time+" - "+this.end_time,this.page=0,this.listInterface()},del:function(i){var e=this;t.showModal({title:"提示",content:"确定要删除此销售单吗？",success:function(t){t.confirm&&e.http({url:e.api.Sales_remove,method:"POST",data:{uid:e.common.get("uid"),id:i},success:function(t){e.page=0,e.listInterface()}})},fail:function(){},complete:function(){}})},details:function(i){t.navigateTo({url:"/pages/sales/details/details?data="+encodeURIComponent(JSON.stringify(i))})},editor:function(i){t.navigateTo({url:"/pages/sales/editor/editor?data="+encodeURIComponent(JSON.stringify(i))})},kuaidi:function(i){t.navigateTo({url:"/pages/sales/Courier/Courier?data="+encodeURIComponent(JSON.stringify(i))}),this.showKuaidi=!1}}};i.default=e}).call(this,e("d5d0")["default"])},badb:function(t,i,e){"use strict";var n=e("a3c4"),s=e.n(n);s.a}},[["b030","common/runtime","common/vendor"]]]);